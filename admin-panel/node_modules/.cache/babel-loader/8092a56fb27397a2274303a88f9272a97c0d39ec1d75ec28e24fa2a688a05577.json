{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u5B66\\u4E60\\\\autoPickup\\\\admin-panel\\\\src\\\\components\\\\ProductModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport toast from 'react-hot-toast';\nimport { PhotoIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { productAPI, dictionaryAPI } from '../services/api';\nimport DictionarySelect from './DictionarySelect';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  name: yup.string().required('请输入商品名称'),\n  description: yup.string().required('请输入商品描述'),\n  category: yup.string().required('请选择商品分类'),\n  price: yup.number().positive('价格必须大于0').required('请输入价格'),\n  stock: yup.number().integer('库存必须是整数').min(0, '库存不能小于0').required('请输入库存'),\n  deliveryType: yup.string().required('请选择发货类型'),\n  deliveryTemplate: yup.string().optional(),\n  deliveryData: yup.object().optional(),\n  // 添加发货数据字段\n  tags: yup.array().of(yup.string())\n});\nconst ProductModal = ({\n  isOpen,\n  onClose,\n  product,\n  onSave\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [tags, setTags] = useState([]);\n  const [tagInput, setTagInput] = useState('');\n  const [images, setImages] = useState([]);\n  const [imagePreviewUrls, setImagePreviewUrls] = useState([]);\n  const [existingImages, setExistingImages] = useState([]);\n  const [imagesToRemove, setImagesToRemove] = useState([]);\n  const [deliveryTemplates, setDeliveryTemplates] = useState([]);\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\n  const [templateFieldValues, setTemplateFieldValues] = useState({}); // 添加这行\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset,\n    watch,\n    setValue\n  } = useForm({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      name: '',\n      description: '',\n      category: '',\n      price: 0,\n      stock: 0,\n      deliveryType: '',\n      deliveryTemplate: '',\n      tags: []\n    }\n  });\n  const deliveryType = watch('deliveryType');\n\n  // 渲染模板字段的函数（移到组件内部）\n  const renderTemplateField = field => {\n    const fieldValue = templateFieldValues[field.name] || field.defaultValue || '';\n    const updateFieldValue = value => {\n      setTemplateFieldValues(prev => ({\n        ...prev,\n        [field.name]: value\n      }));\n    };\n    switch (field.type) {\n      case 'text':\n      case 'url':\n      case 'number':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: [field.label, \" \", field.required && '*']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: field.type === 'number' ? 'number' : 'text',\n            value: fieldValue,\n            onChange: e => updateFieldValue(e.target.value),\n            placeholder: field.placeholder,\n            required: field.required,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, field.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this);\n      case 'password':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: [field.label, \" \", field.required && '*']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: fieldValue,\n            onChange: e => updateFieldValue(e.target.value),\n            placeholder: field.placeholder,\n            required: field.required,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, field.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this);\n      case 'textarea':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: [field.label, \" \", field.required && '*']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: fieldValue,\n            onChange: e => updateFieldValue(e.target.value),\n            placeholder: field.placeholder,\n            required: field.required,\n            rows: 3,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, field.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this);\n      case 'file':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: [field.label, \" \", field.required && '*']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => {\n              var _e$target$files;\n              const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n              if (file) {\n                updateFieldValue(file.name);\n              }\n            },\n            required: field.required,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, field.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n\n  // 获取发货模板\n  // 在fetchDeliveryTemplates函数中添加更多调试信息\n  // 修复fetchDeliveryTemplates函数 - 添加类型转换\n  const fetchDeliveryTemplates = async deliveryType => {\n    try {\n      // 转换发货类型格式：DELIVERY_TYPE_NETDISK -> netdisk\n      let convertedType = deliveryType;\n      if (deliveryType.startsWith('DELIVERY_TYPE_')) {\n        convertedType = deliveryType.replace('DELIVERY_TYPE_', '').toLowerCase();\n      }\n      const response = await dictionaryAPI.getDeliveryTemplates(convertedType);\n      if (response.data.success) {\n        setDeliveryTemplates(response.data.data);\n\n        // 编辑模式：优先使用产品的现有模板 - 修复字段名\n        if (product && (product.deliveryTemplateCode || product.deliveryTemplate)) {\n          const templateCode = product.deliveryTemplateCode || product.deliveryTemplate;\n          const existingTemplate = response.data.data.find(t => {\n            return t.templateCode === templateCode;\n          });\n          if (existingTemplate) {\n            setSelectedTemplate(existingTemplate);\n            setValue('deliveryTemplate', existingTemplate.templateCode);\n            return;\n          } else {}\n        }\n\n        // 新建模式或找不到现有模板时：使用默认模板\n        const defaultTemplate = response.data.data.find(t => t.isDefault);\n        if (defaultTemplate) {\n          setSelectedTemplate(defaultTemplate);\n          setValue('deliveryTemplate', defaultTemplate.templateCode);\n        }\n      } else {}\n    } catch (error) {\n      console.error('❌ 获取发货模板失败:', error);\n    }\n  };\n\n  // 处理发货类型变化\n  // 修复handleDeliveryTypeChange函数\n  const handleDeliveryTypeChange = (value, option) => {\n    setValue('deliveryType', value);\n    if (option) {\n      // 使用option.value而不是value，因为value可能是完整的代码\n      fetchDeliveryTemplates(option.value || value);\n    }\n  };\n\n  // 修复useEffect中的发货类型获取\n  useEffect(() => {\n    if (product) {\n      var _product$categoryCode, _product$deliveryType, _product$deliveryType2;\n      // 修复reset调用中的字段映射\n      reset({\n        name: product.name,\n        description: product.description,\n        category: ((_product$categoryCode = product.categoryCode) === null || _product$categoryCode === void 0 ? void 0 : _product$categoryCode.code) || product.category || '',\n        price: product.price,\n        stock: product.stock,\n        deliveryType: ((_product$deliveryType = product.deliveryTypeCode) === null || _product$deliveryType === void 0 ? void 0 : _product$deliveryType.code) || product.deliveryType || '',\n        // 修复第210-235行的deliveryTemplateCode错误\n        deliveryTemplate: product.deliveryTemplateCode || product.deliveryTemplate || '',\n        // 修复字段名\n        tags: product.tags || []\n      });\n      setTags(product.tags || []);\n\n      // 添加更详细的图片设置逻辑\n      const imageArray = product.images || [];\n      setExistingImages(imageArray);\n\n      // 如果产品有发货数据，设置模板字段值\n      if (product.deliveryData) {\n        setTemplateFieldValues(product.deliveryData);\n      }\n\n      // 如果有发货类型，获取对应的模板\n      const deliveryTypeValue = ((_product$deliveryType2 = product.deliveryTypeCode) === null || _product$deliveryType2 === void 0 ? void 0 : _product$deliveryType2.code) || product.deliveryType;\n      if (deliveryTypeValue) {\n        fetchDeliveryTemplates(deliveryTypeValue);\n      }\n    } else {\n      reset({\n        name: '',\n        description: '',\n        category: '',\n        price: 0,\n        stock: 0,\n        deliveryType: '',\n        deliveryTemplate: '',\n        tags: []\n      });\n      setTags([]);\n      setExistingImages([]);\n      setTemplateFieldValues({});\n      setSelectedTemplate(null);\n      setDeliveryTemplates([]);\n    }\n  }, [product, reset]);\n  const handleAddTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      const newTags = [...tags, tagInput.trim()];\n      setTags(newTags);\n      setValue('tags', newTags);\n      setTagInput('');\n    }\n  };\n  const handleRemoveTag = tagToRemove => {\n    const newTags = tags.filter(tag => tag !== tagToRemove);\n    setTags(newTags);\n    setValue('tags', newTags);\n  };\n  const handleImageUpload = e => {\n    const files = Array.from(e.target.files || []);\n    const totalImages = images.length + existingImages.length;\n    if (totalImages + files.length > 5) {\n      toast.error('最多只能上传5张图片');\n      return;\n    }\n    setImages(prev => [...prev, ...files]);\n    files.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImagePreviewUrls(prev => {\n          var _e$target;\n          return [...prev, (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.result];\n        });\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  const removeNewImage = index => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImagePreviewUrls(prev => prev.filter((_, i) => i !== index));\n  };\n  const removeExistingImage = index => {\n    const imageToRemove = existingImages[index];\n    setImagesToRemove(prev => [...prev, imageToRemove]);\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\n  };\n  const onSubmit = async data => {\n    try {\n      setLoading(true);\n      const formData = new FormData();\n\n      // 添加基本字段\n      Object.keys(data).forEach(key => {\n        if (key !== 'tags' && data[key] !== undefined) {\n          formData.append(key, String(data[key]));\n        }\n      });\n\n      // 添加标签\n      if (tags.length > 0) {\n        formData.append('tags', JSON.stringify(tags));\n      }\n\n      // 添加模板字段数据\n      if (selectedTemplate && Object.keys(templateFieldValues).length > 0) {\n        formData.append('deliveryData', JSON.stringify(templateFieldValues));\n      }\n\n      // 添加图片\n      images.forEach(image => {\n        formData.append('images', image);\n      });\n\n      // 添加要删除的图片\n      if (imagesToRemove.length > 0) {\n        formData.append('imagesToRemove', JSON.stringify(imagesToRemove));\n      }\n      let response;\n      if (product) {\n        response = await productAPI.updateProduct(product._id, formData);\n      } else {\n        response = await productAPI.createProduct(formData);\n      }\n      if (response.success) {\n        toast.success(product ? '商品更新成功' : '商品创建成功');\n        onSave();\n        onClose();\n      } else {\n        toast.error(response.message || '操作失败');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('提交失败:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || '操作失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-gray-900\",\n            children: product ? '编辑商品' : '添加商品'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(XMarkIcon, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u5546\\u54C1\\u540D\\u79F0 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              ...register('name'),\n              className: `w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors.name ? 'border-red-500' : 'border-gray-300'}`,\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5546\\u54C1\\u540D\\u79F0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.name.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u5546\\u54C1\\u63CF\\u8FF0 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              ...register('description'),\n              rows: 4,\n              className: `w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors.description ? 'border-red-500' : 'border-gray-300'}`,\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5546\\u54C1\\u63CF\\u8FF0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.description.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u5546\\u54C1\\u5206\\u7C7B *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DictionarySelect, {\n              typeCode: \"PRODUCT_CATEGORY\",\n              value: watch('category'),\n              onChange: value => setValue('category', value),\n              placeholder: \"\\u8BF7\\u9009\\u62E9\\u5546\\u54C1\\u5206\\u7C7B\",\n              className: errors.category ? 'border-red-500' : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this), errors.category && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.category.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u53D1\\u8D27\\u7C7B\\u578B *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DictionarySelect, {\n              typeCode: \"DELIVERY_TYPE\",\n              value: watch('deliveryType'),\n              onChange: handleDeliveryTypeChange\n              // 修复第440-450行的JSX语法错误\n              ,\n              placeholder: \"\\u8BF7\\u9009\\u62E9\\u53D1\\u8D27\\u7C7B\\u578B\",\n              className: errors.deliveryType ? 'border-red-500' : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), errors.deliveryType && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.deliveryType.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), \"  \", deliveryTemplates.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u53D1\\u8D27\\u6A21\\u677F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 mb-2\",\n              children: [\"\\u8C03\\u8BD5\\u4FE1\\u606F: \\u6A21\\u677F\\u6570\\u91CF=\", deliveryTemplates.length, \", \\u9009\\u4E2D\\u6A21\\u677F=\", (selectedTemplate === null || selectedTemplate === void 0 ? void 0 : selectedTemplate.templateCode) || '无']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: (selectedTemplate === null || selectedTemplate === void 0 ? void 0 : selectedTemplate.templateCode) || '',\n              onChange: e => {\n                const template = deliveryTemplates.find(t => t.templateCode === e.target.value);\n                setSelectedTemplate(template);\n                setValue('deliveryTemplate', e.target.value);\n                // 修复第465-470行的deliveryTemplateCode错误\n                // 只在新建模式或切换到不同模板时重置字段值\n                const currentTemplateCode = product === null || product === void 0 ? void 0 : product.deliveryTemplate; // 使用正确的属性名\n                if (!product || currentTemplateCode !== e.target.value) {\n                  setTemplateFieldValues({});\n                }\n              },\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u8BF7\\u9009\\u62E9\\u53D1\\u8D27\\u6A21\\u677F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), deliveryTemplates.map(template => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: template.templateCode,\n                children: template.templateName\n              }, template.templateCode, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500 mb-2\",\n            children: [\"fields=\", selectedTemplate !== null && selectedTemplate !== void 0 && selectedTemplate.fields ? selectedTemplate.fields.length : 0, \"\\u4E2A\\u5B57\\u6BB5\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this), selectedTemplate && selectedTemplate.fields && selectedTemplate.fields.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u53D1\\u8D27\\u4FE1\\u606F\\u586B\\u5199\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: selectedTemplate.fields.map(field => {\n                return renderTemplateField(field);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"\\u4EF7\\u683C *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                step: \"0.01\",\n                ...register('price', {\n                  valueAsNumber: true\n                }),\n                className: `w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors.price ? 'border-red-500' : 'border-gray-300'}`,\n                placeholder: \"0.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 17\n              }, this), errors.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.price.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"\\u5E93\\u5B58 *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                ...register('stock', {\n                  valueAsNumber: true\n                }),\n                className: `w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors.stock ? 'border-red-500' : 'border-gray-300'}`,\n                placeholder: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this), errors.stock && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.stock.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u5546\\u54C1\\u56FE\\u7247 (\\u6700\\u591A5\\u5F20)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 15\n            }, this), existingImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: [\"\\u73B0\\u6709\\u56FE\\u7247 (\", existingImages.length, \"\\u5F20)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-3 gap-2 mb-4\",\n                children: existingImages.map((image, index) => {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"relative group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${process.env.REACT_APP_IMG_URL || 'http://localhost:3001'}${image}`,\n                      alt: `现有图片 ${index + 1}`,\n                      className: \"w-full h-32 object-cover rounded-lg border border-gray-200\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 560,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => {\n                        setExistingImages(prev => prev.filter((_, i) => i !== index));\n                        setImagesToRemove(prev => [...prev, image]);\n                      },\n                      className: \"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600\",\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 27\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 17\n            }, this), images.length + existingImages.length < 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: existingImages.length > 0 ? '新增图片' : '上传图片'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  multiple: true,\n                  accept: \"image/*\",\n                  onChange: handleImageUpload,\n                  className: \"hidden\",\n                  id: \"image-upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 589,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"image-upload\",\n                  className: \"cursor-pointer flex flex-col items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(PhotoIcon, {\n                    className: \"w-12 h-12 text-gray-400 mb-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: \"\\u70B9\\u51FB\\u9009\\u62E9\\u56FE\\u7247\\u6216\\u62D6\\u62FD\\u5230\\u6B64\\u5904\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 602,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-400 mt-1\",\n                    children: [\"\\u652F\\u6301 JPG\\u3001PNG \\u683C\\u5F0F\\uFF0C\\u6700\\u591A \", 5 - images.length - existingImages.length, \" \\u5F20\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this), imagePreviewUrls.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: [\"\\u65B0\\u4E0A\\u4F20\\u56FE\\u7247 (\", imagePreviewUrls.length, \"\\u5F20)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-3 gap-2\",\n                children: imagePreviewUrls.map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: `新图片 ${index + 1}`,\n                    className: \"w-full h-32 object-cover rounded-lg border border-gray-200\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => removeNewImage(index),\n                    className: \"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600\",\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 627,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this), \"  \", /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u5546\\u54C1\\u6807\\u7B7E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2 mb-2\",\n              children: tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",\n                children: [tag, /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleRemoveTag(tag),\n                  className: \"ml-1 text-blue-600 hover:text-blue-800\",\n                  children: /*#__PURE__*/_jsxDEV(XMarkIcon, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 658,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: tagInput,\n                onChange: e => setTagInput(e.target.value),\n                onKeyPress: e => e.key === 'Enter' && (e.preventDefault(), handleAddTag()),\n                className: \"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"\\u8F93\\u5165\\u6807\\u7B7E\\u540E\\u6309\\u56DE\\u8F66\\u6DFB\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleAddTag,\n                className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n                children: \"\\u6DFB\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2 pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onClose,\n              className: \"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50\",\n              children: \"\\u53D6\\u6D88\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading,\n              className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\",\n              children: loading ? '保存中...' : '保存'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), \"  \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductModal, \"3ivEsxGWeH4lR2Q8SLWUSXW5YAA=\", false, function () {\n  return [useForm];\n});\n_c = ProductModal;\nexport default ProductModal;\nvar _c;\n$RefreshReg$(_c, \"ProductModal\");","map":{"version":3,"names":["React","useState","useEffect","useForm","yupResolver","yup","toast","PhotoIcon","XMarkIcon","productAPI","dictionaryAPI","DictionarySelect","jsxDEV","_jsxDEV","schema","object","name","string","required","description","category","price","number","positive","stock","integer","min","deliveryType","deliveryTemplate","optional","deliveryData","tags","array","of","ProductModal","isOpen","onClose","product","onSave","_s","loading","setLoading","setTags","tagInput","setTagInput","images","setImages","imagePreviewUrls","setImagePreviewUrls","existingImages","setExistingImages","imagesToRemove","setImagesToRemove","deliveryTemplates","setDeliveryTemplates","selectedTemplate","setSelectedTemplate","templateFieldValues","setTemplateFieldValues","register","handleSubmit","formState","errors","reset","watch","setValue","resolver","defaultValues","renderTemplateField","field","fieldValue","defaultValue","updateFieldValue","value","prev","type","children","className","label","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","target","placeholder","rows","_e$target$files","file","files","fetchDeliveryTemplates","convertedType","startsWith","replace","toLowerCase","response","getDeliveryTemplates","data","success","deliveryTemplateCode","templateCode","existingTemplate","find","t","defaultTemplate","isDefault","error","console","handleDeliveryTypeChange","option","_product$categoryCode","_product$deliveryType","_product$deliveryType2","categoryCode","code","deliveryTypeCode","imageArray","deliveryTypeValue","handleAddTag","trim","includes","newTags","handleRemoveTag","tagToRemove","filter","tag","handleImageUpload","Array","from","totalImages","length","forEach","reader","FileReader","onload","_e$target","result","readAsDataURL","removeNewImage","index","_","i","removeExistingImage","imageToRemove","onSubmit","formData","FormData","Object","keys","key","undefined","append","String","JSON","stringify","image","updateProduct","_id","createProduct","message","_error$response","_error$response$data","onClick","typeCode","template","currentTemplateCode","map","templateName","fields","step","valueAsNumber","src","process","env","REACT_APP_IMG_URL","alt","multiple","accept","id","htmlFor","url","onKeyPress","preventDefault","disabled","_c","$RefreshReg$"],"sources":["E:/学习/autoPickup/admin-panel/src/components/ProductModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useForm, SubmitHandler } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport toast from 'react-hot-toast';\r\nimport { PhotoIcon, XMarkIcon } from '@heroicons/react/24/outline';\r\nimport { productAPI, dictionaryAPI } from '../services/api';\r\nimport { Product, ProductFormData } from '../types';\r\nimport DictionarySelect from './DictionarySelect';\r\n\r\nconst schema = yup.object({\r\n  name: yup.string().required('请输入商品名称'),\r\n  description: yup.string().required('请输入商品描述'),\r\n  category: yup.string().required('请选择商品分类'),\r\n  price: yup.number().positive('价格必须大于0').required('请输入价格'),\r\n  stock: yup.number().integer('库存必须是整数').min(0, '库存不能小于0').required('请输入库存'),\r\n  deliveryType: yup.string().required('请选择发货类型'),\r\n  deliveryTemplate: yup.string().optional(),\r\n  deliveryData: yup.object().optional(), // 添加发货数据字段\r\n  tags: yup.array().of(yup.string()),\r\n});\r\n\r\ntype FormData = yup.InferType<typeof schema>;\r\n\r\ninterface ProductModalProps {\r\n  isOpen: boolean;\r\n  product?: Product | null;\r\n  onClose: () => void;\r\n  onSave: () => void;\r\n}\r\n\r\nconst ProductModal: React.FC<ProductModalProps> = ({ isOpen, onClose, product, onSave }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [tagInput, setTagInput] = useState('');\r\n  const [images, setImages] = useState<File[]>([]);\r\n  const [imagePreviewUrls, setImagePreviewUrls] = useState<string[]>([]);\r\n  const [existingImages, setExistingImages] = useState<string[]>([]);\r\n  const [imagesToRemove, setImagesToRemove] = useState<string[]>([]);\r\n  const [deliveryTemplates, setDeliveryTemplates] = useState<any[]>([]);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<any>(null);\r\n  const [templateFieldValues, setTemplateFieldValues] = useState<Record<string, any>>({}); // 添加这行\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    watch,\r\n    setValue,\r\n  } = useForm<FormData>({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {\r\n      name: '',\r\n      description: '',\r\n      category: '',\r\n      price: 0,\r\n      stock: 0,\r\n      deliveryType: '',\r\n      deliveryTemplate: '',\r\n      tags: [],\r\n    },\r\n  });\r\n\r\n  const deliveryType = watch('deliveryType');\r\n\r\n  // 渲染模板字段的函数（移到组件内部）\r\n  const renderTemplateField = (field: any) => {\r\n    const fieldValue = templateFieldValues[field.name] || field.defaultValue || '';\r\n    \r\n    const updateFieldValue = (value: any) => {\r\n      setTemplateFieldValues((prev: Record<string, any>) => ({\r\n        ...prev,\r\n        [field.name]: value\r\n      }));\r\n    };\r\n\r\n    switch (field.type) {\r\n      case 'text':\r\n      case 'url':\r\n      case 'number':\r\n        return (\r\n          <div key={field.name}>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {field.label} {field.required && '*'}\r\n            </label>\r\n            <input\r\n              type={field.type === 'number' ? 'number' : 'text'}\r\n              value={fieldValue}\r\n              onChange={(e) => updateFieldValue(e.target.value)}\r\n              placeholder={field.placeholder}\r\n              required={field.required}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'password':\r\n        return (\r\n          <div key={field.name}>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {field.label} {field.required && '*'}\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              value={fieldValue}\r\n              onChange={(e) => updateFieldValue(e.target.value)}\r\n              placeholder={field.placeholder}\r\n              required={field.required}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'textarea':\r\n        return (\r\n          <div key={field.name}>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {field.label} {field.required && '*'}\r\n            </label>\r\n            <textarea\r\n              value={fieldValue}\r\n              onChange={(e) => updateFieldValue(e.target.value)}\r\n              placeholder={field.placeholder}\r\n              required={field.required}\r\n              rows={3}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'file':\r\n        return (\r\n          <div key={field.name}>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              {field.label} {field.required && '*'}\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              onChange={(e) => {\r\n                const file = e.target.files?.[0];\r\n                if (file) {\r\n                  updateFieldValue(file.name);\r\n                }\r\n              }}\r\n              required={field.required}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // 获取发货模板\r\n  // 在fetchDeliveryTemplates函数中添加更多调试信息\r\n  // 修复fetchDeliveryTemplates函数 - 添加类型转换\r\n  const fetchDeliveryTemplates = async (deliveryType: string) => {\r\n    try {\r\n      \r\n      // 转换发货类型格式：DELIVERY_TYPE_NETDISK -> netdisk\r\n      let convertedType = deliveryType;\r\n      if (deliveryType.startsWith('DELIVERY_TYPE_')) {\r\n        convertedType = deliveryType.replace('DELIVERY_TYPE_', '').toLowerCase();\r\n      }\r\n      const response = await dictionaryAPI.getDeliveryTemplates(convertedType);\r\n      \r\n      if (response.data.success) {\r\n        \r\n        setDeliveryTemplates(response.data.data);\r\n        \r\n        // 编辑模式：优先使用产品的现有模板 - 修复字段名\r\n        if (product && ((product as any).deliveryTemplateCode || product.deliveryTemplate)) {\r\n          const templateCode = (product as any).deliveryTemplateCode || product.deliveryTemplate;\r\n\r\n          \r\n          const existingTemplate = response.data.data.find((t: any) => {\r\n            return t.templateCode === templateCode;\r\n          });\r\n          if (existingTemplate) {\r\n            setSelectedTemplate(existingTemplate);\r\n            setValue('deliveryTemplate', existingTemplate.templateCode);\r\n            return;\r\n          } else {\r\n          }\r\n        }\r\n        \r\n        // 新建模式或找不到现有模板时：使用默认模板\r\n        const defaultTemplate = response.data.data.find((t: any) => t.isDefault);\r\n        if (defaultTemplate) {\r\n          setSelectedTemplate(defaultTemplate);\r\n          setValue('deliveryTemplate', defaultTemplate.templateCode);\r\n        }\r\n      } else {\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ 获取发货模板失败:', error);\r\n    }\r\n  };\r\n\r\n  // 处理发货类型变化\r\n  // 修复handleDeliveryTypeChange函数\r\n  const handleDeliveryTypeChange = (value: string, option?: any) => {\r\n    setValue('deliveryType', value);\r\n    if (option) {\r\n      // 使用option.value而不是value，因为value可能是完整的代码\r\n      fetchDeliveryTemplates(option.value || value);\r\n    }\r\n  };\r\n  \r\n  // 修复useEffect中的发货类型获取\r\n  useEffect(() => {\r\n    if (product) {\r\n      \r\n      // 修复reset调用中的字段映射\r\n      reset({\r\n        name: product.name,\r\n        description: product.description,\r\n        category: product.categoryCode?.code || product.category || '',\r\n        price: product.price,\r\n        stock: product.stock,\r\n        deliveryType: product.deliveryTypeCode?.code || product.deliveryType || '',\r\n        // 修复第210-235行的deliveryTemplateCode错误\r\n        deliveryTemplate: (product as any).deliveryTemplateCode || product.deliveryTemplate || '', // 修复字段名\r\n        tags: product.tags || [],\r\n        });\r\n        setTags(product.tags || []);\r\n        \r\n        // 添加更详细的图片设置逻辑\r\n        const imageArray = product.images || [];\r\n        setExistingImages(imageArray);\r\n        \r\n        // 如果产品有发货数据，设置模板字段值\r\n        if (product.deliveryData) {\r\n          setTemplateFieldValues(product.deliveryData);\r\n        }\r\n      \r\n      // 如果有发货类型，获取对应的模板\r\n      const deliveryTypeValue = product.deliveryTypeCode?.code || product.deliveryType;\r\n      if (deliveryTypeValue) {\r\n        fetchDeliveryTemplates(deliveryTypeValue);\r\n      }\r\n    } else {\r\n      reset({\r\n        name: '',\r\n        description: '',\r\n        category: '',\r\n        price: 0,\r\n        stock: 0,\r\n        deliveryType: '',\r\n        deliveryTemplate: '',\r\n        tags: [],\r\n      });\r\n      setTags([]);\r\n      setExistingImages([]);\r\n      setTemplateFieldValues({});\r\n      setSelectedTemplate(null);\r\n      setDeliveryTemplates([]);\r\n    }\r\n  }, [product, reset]);\r\n\r\n  const handleAddTag = () => {\r\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\r\n      const newTags = [...tags, tagInput.trim()];\r\n      setTags(newTags);\r\n      setValue('tags', newTags);\r\n      setTagInput('');\r\n    }\r\n  };\r\n\r\n  const handleRemoveTag = (tagToRemove: string) => {\r\n    const newTags = tags.filter(tag => tag !== tagToRemove);\r\n    setTags(newTags);\r\n    setValue('tags', newTags);\r\n  };\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    const totalImages = images.length + existingImages.length;\r\n    \r\n    if (totalImages + files.length > 5) {\r\n      toast.error('最多只能上传5张图片');\r\n      return;\r\n    }\r\n\r\n    setImages(prev => [...prev, ...files]);\r\n    \r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreviewUrls(prev => [...prev, e.target?.result as string]);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const removeNewImage = (index: number) => {\r\n    setImages(prev => prev.filter((_, i) => i !== index));\r\n    setImagePreviewUrls(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const removeExistingImage = (index: number) => {\r\n    const imageToRemove = existingImages[index];\r\n    setImagesToRemove(prev => [...prev, imageToRemove]);\r\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const onSubmit: SubmitHandler<FormData> = async (data) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const formData = new FormData();\r\n      \r\n      // 添加基本字段\r\n      Object.keys(data).forEach(key => {\r\n        if (key !== 'tags' && data[key as keyof FormData] !== undefined) {\r\n          formData.append(key, String(data[key as keyof FormData]));\r\n        }\r\n      });\r\n      \r\n      // 添加标签\r\n      if (tags.length > 0) {\r\n        formData.append('tags', JSON.stringify(tags));\r\n      }\r\n      \r\n      // 添加模板字段数据\r\n      if (selectedTemplate && Object.keys(templateFieldValues).length > 0) {\r\n        formData.append('deliveryData', JSON.stringify(templateFieldValues));\r\n      }\r\n      \r\n      // 添加图片\r\n      images.forEach((image) => {\r\n        formData.append('images', image);\r\n      });\r\n      \r\n      // 添加要删除的图片\r\n      if (imagesToRemove.length > 0) {\r\n        formData.append('imagesToRemove', JSON.stringify(imagesToRemove));\r\n      }\r\n      \r\n      let response;\r\n      if (product) {\r\n        response = await productAPI.updateProduct(product._id, formData);\r\n      } else {\r\n        response = await productAPI.createProduct(formData);\r\n      }\r\n      \r\n      if (response.success) {\r\n        toast.success(product ? '商品更新成功' : '商品创建成功');\r\n        onSave();\r\n        onClose();\r\n      } else {\r\n        toast.error(response.message || '操作失败');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('提交失败:', error);\r\n      toast.error(error.response?.data?.message || '操作失败');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n      <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white\">\r\n        <div className=\"mt-3\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900\">\r\n              {product ? '编辑商品' : '添加商品'}\r\n            </h3>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-gray-400 hover:text-gray-600\"\r\n            >\r\n              <XMarkIcon className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            {/* 商品名称 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                商品名称 *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                {...register('name')}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                  errors.name ? 'border-red-500' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"请输入商品名称\"\r\n              />\r\n              {errors.name && (\r\n                <p className=\"text-red-500 text-sm mt-1\">{errors.name.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* 商品描述 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                商品描述 *\r\n              </label>\r\n              <textarea\r\n                {...register('description')}\r\n                rows={4}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                  errors.description ? 'border-red-500' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"请输入商品描述\"\r\n              />\r\n              {errors.description && (\r\n                <p className=\"text-red-500 text-sm mt-1\">{errors.description.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* 商品分类 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                商品分类 *\r\n              </label>\r\n              <DictionarySelect\r\n                typeCode=\"PRODUCT_CATEGORY\"\r\n                value={watch('category')}\r\n                onChange={(value) => setValue('category', value)}\r\n                placeholder=\"请选择商品分类\"\r\n                className={errors.category ? 'border-red-500' : ''}\r\n              />\r\n              {errors.category && (\r\n                <p className=\"text-red-500 text-sm mt-1\">{errors.category.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* 发货类型 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                发货类型 *\r\n              </label>\r\n              <DictionarySelect\r\n                typeCode=\"DELIVERY_TYPE\"\r\n                value={watch('deliveryType')}\r\n                onChange={handleDeliveryTypeChange}\r\n                // 修复第440-450行的JSX语法错误\r\n                placeholder=\"请选择发货类型\"\r\n                className={errors.deliveryType ? 'border-red-500' : ''}\r\n              />\r\n              {errors.deliveryType && (\r\n                <p className=\"text-red-500 text-sm mt-1\">{errors.deliveryType.message}</p>\r\n              )}\r\n            </div>  {/* 移除多余的 )} */}\r\n\r\n            {/* 发货模板选择 */}\r\n            {deliveryTemplates.length > 0 && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  发货模板\r\n                </label>\r\n                {/* 添加调试信息 */}\r\n                <div className=\"text-xs text-gray-500 mb-2\">\r\n                  调试信息: 模板数量={deliveryTemplates.length}, 选中模板={selectedTemplate?.templateCode || '无'}\r\n                </div>\r\n                <select\r\n                  value={selectedTemplate?.templateCode || ''}\r\n                  onChange={(e) => {\r\n                    const template = deliveryTemplates.find(t => t.templateCode === e.target.value);\r\n                    setSelectedTemplate(template);\r\n                    setValue('deliveryTemplate', e.target.value);\r\n                    // 修复第465-470行的deliveryTemplateCode错误\r\n                    // 只在新建模式或切换到不同模板时重置字段值\r\n                    const currentTemplateCode = product?.deliveryTemplate; // 使用正确的属性名\r\n                    if (!product || (currentTemplateCode !== e.target.value)) {\r\n                      setTemplateFieldValues({});\r\n                    }\r\n                  }}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">请选择发货模板</option>\r\n                  {deliveryTemplates.map((template) => (\r\n                    <option key={template.templateCode} value={template.templateCode}>\r\n                      {template.templateName}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {/* 模板字段填写区域 - 添加更多调试信息 */}\r\n            <div className=\"text-xs text-gray-500 mb-2\">\r\n              fields={selectedTemplate?.fields ? selectedTemplate.fields.length : 0}个字段\r\n            </div>\r\n            {selectedTemplate && selectedTemplate.fields && selectedTemplate.fields.length > 0 && (\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3\">发货信息填写</h4>\r\n                <div className=\"space-y-4\">\r\n                  {selectedTemplate.fields.map((field: any) => {\r\n                    return renderTemplateField(field);\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* 价格和库存 */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  价格 *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  {...register('price', { valueAsNumber: true })}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                    errors.price ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"0.00\"\r\n                />\r\n                {errors.price && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.price.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  库存 *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  {...register('stock', { valueAsNumber: true })}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                    errors.stock ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"0\"\r\n                />\r\n                {errors.stock && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.stock.message}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* 商品图片 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                商品图片 (最多5张)\r\n              </label>\r\n              \r\n              {/* 现有图片显示 */}\r\n              {existingImages.length > 0 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    现有图片 ({existingImages.length}张)\r\n                  </label>\r\n                  <div className=\"grid grid-cols-3 gap-2 mb-4\">\r\n                    {existingImages.map((image, index) => {\r\n                      \r\n                      return (\r\n                        <div key={index} className=\"relative group\">\r\n                          <img\r\n                            src={`${process.env.REACT_APP_IMG_URL || 'http://localhost:3001'}${image}`}\r\n                            alt={`现有图片 ${index + 1}`}\r\n                            className=\"w-full h-32 object-cover rounded-lg border border-gray-200\"\r\n                          />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              setExistingImages(prev => prev.filter((_, i) => i !== index));\r\n                              setImagesToRemove(prev => [...prev, image]);\r\n                            }}\r\n                            className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600\"\r\n                          >\r\n                            ×\r\n                          </button>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* 上传新图片 */}\r\n              {(images.length + existingImages.length) < 5 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    {existingImages.length > 0 ? '新增图片' : '上传图片'}\r\n                  </label>\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageUpload}\r\n                      className=\"hidden\"\r\n                      id=\"image-upload\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"image-upload\"\r\n                      className=\"cursor-pointer flex flex-col items-center\"\r\n                    >\r\n                      <PhotoIcon className=\"w-12 h-12 text-gray-400 mb-2\" />\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        点击选择图片或拖拽到此处\r\n                      </span>\r\n                      <span className=\"text-xs text-gray-400 mt-1\">\r\n                        支持 JPG、PNG 格式，最多 {5 - images.length - existingImages.length} 张\r\n                      </span>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* 新上传图片预览 */}\r\n              {imagePreviewUrls.length > 0 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    新上传图片 ({imagePreviewUrls.length}张)\r\n                  </label>\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    {imagePreviewUrls.map((url, index) => (\r\n                      <div key={index} className=\"relative group\">\r\n                        <img\r\n                          src={url}\r\n                          alt={`新图片 ${index + 1}`}\r\n                          className=\"w-full h-32 object-cover rounded-lg border border-gray-200\"\r\n                        />\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => removeNewImage(index)}\r\n                          className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600\"\r\n                        >\r\n                          ×\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>  {/* 添加这个闭合标签来闭合商品图片部分 */}\r\n\r\n            {/* 标签 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                商品标签\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2 mb-2\">\r\n                {tags.map((tag, index) => (\r\n                  <span\r\n                    key={index}\r\n                    className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\"\r\n                  >\r\n                    {tag}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleRemoveTag(tag)}\r\n                      className=\"ml-1 text-blue-600 hover:text-blue-800\"\r\n                    >\r\n                      <XMarkIcon className=\"w-3 h-3\" />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={tagInput}\r\n                  onChange={(e) => setTagInput(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\r\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"输入标签后按回车添加\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddTag}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                >\r\n                  添加\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Submit buttons */}\r\n            <div className=\"flex justify-end space-x-2 pt-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={onClose}\r\n                className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50\"\r\n              >\r\n                取消\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\r\n              >\r\n                {loading ? '保存中...' : '保存'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>  {/* Add this closing div tag for the mt-3 div */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}