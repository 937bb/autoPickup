{"ast":null,"code":"var _jsxFileName = \"/Users/937bb/Documents/userProject/AutoPickup/admin-panel/src/components/ProductModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport toast from 'react-hot-toast';\nimport { PhotoIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { productAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  name: yup.string().required('请输入商品名称'),\n  description: yup.string().required('请输入商品描述'),\n  category: yup.string().required('请选择商品分类'),\n  price: yup.number().positive('价格必须大于0').required('请输入价格'),\n  stock: yup.number().integer('库存必须是整数').min(0, '库存不能小于0').required('请输入库存'),\n  deliveryType: yup.string().oneOf(['link', 'text', 'file', 'account']).required('请选择发货类型'),\n  deliveryTemplate: yup.string().required('请输入发货模板'),\n  tags: yup.array().of(yup.string())\n});\nconst ProductModal = ({\n  product,\n  onClose,\n  onSave\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [tags, setTags] = useState([]);\n  const [tagInput, setTagInput] = useState('');\n  const [images, setImages] = useState([]);\n  const [imagePreviewUrls, setImagePreviewUrls] = useState([]);\n  const [existingImages, setExistingImages] = useState([]);\n  const categories = ['影视资源', '教育资源', '软件工具', '游戏资源', '音乐资源', '其他'];\n  const deliveryTypes = [{\n    value: 'link',\n    label: '网盘链接'\n  }, {\n    value: 'text',\n    label: '文本内容'\n  }, {\n    value: 'file',\n    label: '文件下载'\n  }, {\n    value: 'account',\n    label: '账号密码'\n  }];\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset,\n    watch,\n    setValue\n  } = useForm({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      name: '',\n      description: '',\n      category: '',\n      price: 0,\n      stock: 0,\n      deliveryType: 'link',\n      deliveryTemplate: '',\n      tags: []\n    }\n  });\n  const deliveryType = watch('deliveryType');\n  useEffect(() => {\n    if (product) {\n      reset({\n        name: product.name,\n        description: product.description,\n        category: product.category,\n        price: product.price,\n        stock: product.stock,\n        deliveryType: product.deliveryType,\n        deliveryTemplate: product.deliveryTemplate\n      });\n      setTags(product.tags || []);\n      setExistingImages(product.images || []);\n    } else {\n      reset({\n        name: '',\n        description: '',\n        category: '',\n        price: 0,\n        stock: 0,\n        deliveryType: 'link',\n        deliveryTemplate: ''\n      });\n      setTags([]);\n      setImages([]);\n      setImagePreviewUrls([]);\n      setExistingImages([]);\n    }\n  }, [product, reset]);\n  const handleAddTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n  const handleRemoveTag = tagToRemove => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n  };\n\n  // 处理图片上传\n  const handleImageUpload = e => {\n    const files = Array.from(e.target.files || []);\n    if (files.length + images.length + existingImages.length > 5) {\n      toast.error('最多只能上传5张图片');\n      return;\n    }\n    const validFiles = files.filter(file => {\n      const isValidType = file.type.startsWith('image/');\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      if (!isValidType) {\n        toast.error(`${file.name} 不是有效的图片文件`);\n      }\n      if (!isValidSize) {\n        toast.error(`${file.name} 文件大小超过5MB`);\n      }\n      return isValidType && isValidSize;\n    });\n    setImages(prev => [...prev, ...validFiles]);\n    const newPreviewUrls = validFiles.map(file => URL.createObjectURL(file));\n    setImagePreviewUrls(prev => [...prev, ...newPreviewUrls]);\n  };\n  const removeNewImage = index => {\n    const newImages = images.filter((_, i) => i !== index);\n    const newPreviewUrls = imagePreviewUrls.filter((_, i) => i !== index);\n    URL.revokeObjectURL(imagePreviewUrls[index]);\n    setImages(newImages);\n    setImagePreviewUrls(newPreviewUrls);\n  };\n  const removeExistingImage = index => {\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\n  };\n  const onSubmit = async data => {\n    setLoading(true);\n    try {\n      var _product$images;\n      // 如果有图片上传，使用FormData\n      if (images.length > 0 || existingImages.length !== ((product === null || product === void 0 ? void 0 : (_product$images = product.images) === null || _product$images === void 0 ? void 0 : _product$images.length) || 0)) {\n        const formData = new FormData();\n\n        // 添加表单数据\n        Object.keys(data).forEach(key => {\n          if (key !== 'tags') {\n            formData.append(key, data[key]);\n          }\n        });\n\n        // 添加标签\n        tags.forEach(tag => {\n          formData.append('tags', tag);\n        });\n\n        // 添加新图片\n        images.forEach(image => {\n          formData.append('images', image);\n        });\n\n        // 添加保留的已存在图片\n        existingImages.forEach(imageUrl => {\n          formData.append('existingImages', imageUrl);\n        });\n        let response;\n        if (product) {\n          response = await productAPI.updateProduct(product._id, formData);\n        } else {\n          response = await productAPI.createProduct(formData);\n        }\n        if (response.success) {\n          toast.success(product ? '商品更新成功' : '商品创建成功');\n          onSave();\n        } else {\n          toast.error(response.message || '操作失败');\n        }\n      } else {\n        // 没有图片变化，使用普通对象\n        const productData = {\n          ...data,\n          tags\n        };\n        let response;\n        if (product) {\n          response = await productAPI.updateProduct(product._id, productData);\n        } else {\n          response = await productAPI.createProduct(productData);\n        }\n        if (response.success) {\n          toast.success(product ? '商品更新成功' : '商品创建成功');\n          onSave();\n        } else {\n          toast.error(response.message || '操作失败');\n        }\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || '操作失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getDeliveryTemplate = useCallback(type => {\n    switch (type) {\n      case 'link':\n        return '网盘链接: {link}\\n提取码: {password}\\n有效期: {expiry}';\n      case 'text':\n        return '内容: {content}\\n说明: {description}';\n      case 'file':\n        return '文件名: {filename}\\n下载链接: {download_url}';\n      case 'account':\n        return '账号: {username}\\n密码: {password}\\n说明: {note}';\n      default:\n        return '';\n    }\n  }, []);\n  useEffect(() => {\n    if (deliveryType) {\n      const template = getDeliveryTemplate(deliveryType);\n      setValue('deliveryTemplate', template);\n    }\n  }, [deliveryType, getDeliveryTemplate, setValue]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-gray-900\",\n            children: product ? '编辑商品' : '添加商品'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(XMarkIcon, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u5546\\u54C1\\u56FE\\u7247 (\\u6700\\u591A5\\u5F20)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-4\",\n              children: [existingImages.map((imageUrl, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative group\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imageUrl,\n                  alt: `商品图片 ${index + 1}`,\n                  className: \"w-full h-24 object-cover rounded-lg border border-gray-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => removeExistingImage(index),\n                  className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\",\n                  children: /*#__PURE__*/_jsxDEV(XMarkIcon, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this)]\n              }, `existing-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)), imagePreviewUrls.map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative group\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: url,\n                  alt: `新图片 ${index + 1}`,\n                  className: \"w-full h-24 object-cover rounded-lg border border-gray-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => removeNewImage(index),\n                  className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\",\n                  children: /*#__PURE__*/_jsxDEV(XMarkIcon, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 21\n                }, this)]\n              }, `new-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)), images.length + existingImages.length < 5 && /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex flex-col items-center justify-center w-full h-24 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col items-center justify-center pt-2 pb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(PhotoIcon, {\n                    className: \"w-6 h-6 text-gray-400 mb-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500\",\n                    children: \"\\u70B9\\u51FB\\u4E0A\\u4F20\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  multiple: true,\n                  accept: \"image/*\",\n                  onChange: handleImageUpload,\n                  className: \"hidden\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: \"\\u652F\\u6301 JPG\\u3001PNG\\u3001GIF \\u683C\\u5F0F\\uFF0C\\u5355\\u4E2A\\u6587\\u4EF6\\u4E0D\\u8D85\\u8FC7 5MB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"\\u5546\\u54C1\\u540D\\u79F0 *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                ...register('name'),\n                className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.name ? 'border-red-500' : 'border-gray-300'}`,\n                placeholder: \"\\u8BF7\\u8F93\\u5165\\u5546\\u54C1\\u540D\\u79F0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.name.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"\\u5546\\u54C1\\u5206\\u7C7B *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                ...register('category'),\n                className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.category ? 'border-red-500' : 'border-gray-300'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"\\u8BF7\\u9009\\u62E9\\u5206\\u7C7B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: category,\n                  children: category\n                }, category, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this), errors.category && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.category.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"\\u4EF7\\u683C (\\xA5) *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                step: \"0.01\",\n                ...register('price', {\n                  valueAsNumber: true\n                }),\n                className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.price ? 'border-red-500' : 'border-gray-300'}`,\n                placeholder: \"0.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this), errors.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.price.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"\\u5E93\\u5B58 *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                ...register('stock', {\n                  valueAsNumber: true\n                }),\n                className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.stock ? 'border-red-500' : 'border-gray-300'}`,\n                placeholder: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this), errors.stock && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.stock.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u5546\\u54C1\\u63CF\\u8FF0 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              ...register('description'),\n              rows: 3,\n              className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${errors.description ? 'border-red-500' : 'border-gray-300'}`,\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5546\\u54C1\\u63CF\\u8FF0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.description.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u53D1\\u8D27\\u7C7B\\u578B *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              ...register('deliveryType'),\n              className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${errors.deliveryType ? 'border-red-500' : 'border-gray-300'}`,\n              children: deliveryTypes.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: type.value,\n                children: type.label\n              }, type.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), errors.deliveryType && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.deliveryType.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u53D1\\u8D27\\u6A21\\u677F *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              ...register('deliveryTemplate'),\n              rows: 4,\n              className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none font-mono text-sm ${errors.deliveryTemplate ? 'border-red-500' : 'border-gray-300'}`,\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u53D1\\u8D27\\u6A21\\u677F\\uFF0C\\u4F7F\\u7528 {\\u53D8\\u91CF\\u540D} \\u683C\\u5F0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), errors.deliveryTemplate && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.deliveryTemplate.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 text-xs mt-1\",\n              children: [\"\\u4F7F\\u7528\\u5927\\u62EC\\u53F7\\u5305\\u56F4\\u53D8\\u91CF\\u540D\\uFF0C\\u5982\\uFF1A\", '{link}', \", \", '{password}', \" \\u7B49\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u5546\\u54C1\\u6807\\u7B7E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2 mb-2\",\n              children: tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",\n                children: [tag, /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleRemoveTag(tag),\n                  className: \"ml-1 text-blue-600 hover:text-blue-800\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: tagInput,\n                onChange: e => setTagInput(e.target.value),\n                onKeyPress: e => e.key === 'Enter' && (e.preventDefault(), handleAddTag()),\n                className: \"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n                placeholder: \"\\u8F93\\u5165\\u6807\\u7B7E\\u540E\\u6309\\u56DE\\u8F66\\u6216\\u70B9\\u51FB\\u6DFB\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleAddTag,\n                className: \"px-4 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: \"\\u6DFB\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-3 pt-6 border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: onClose,\n              className: \"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: \"\\u53D6\\u6D88\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading,\n              className: \"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this), product ? '更新中...' : '创建中...']\n              }, void 0, true) : product ? '更新商品' : '创建商品'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductModal, \"jEhxvXRnwAtsAIz0q8NaD9epKjo=\", false, function () {\n  return [useForm];\n});\n_c = ProductModal;\nexport default ProductModal;\nvar _c;\n$RefreshReg$(_c, \"ProductModal\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useForm","yupResolver","yup","toast","PhotoIcon","XMarkIcon","productAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","schema","object","name","string","required","description","category","price","number","positive","stock","integer","min","deliveryType","oneOf","deliveryTemplate","tags","array","of","ProductModal","product","onClose","onSave","_s","loading","setLoading","setTags","tagInput","setTagInput","images","setImages","imagePreviewUrls","setImagePreviewUrls","existingImages","setExistingImages","categories","deliveryTypes","value","label","register","handleSubmit","formState","errors","reset","watch","setValue","resolver","defaultValues","handleAddTag","trim","includes","handleRemoveTag","tagToRemove","filter","tag","handleImageUpload","e","files","Array","from","target","length","error","validFiles","file","isValidType","type","startsWith","isValidSize","size","prev","newPreviewUrls","map","URL","createObjectURL","removeNewImage","index","newImages","_","i","revokeObjectURL","removeExistingImage","onSubmit","data","_product$images","formData","FormData","Object","keys","forEach","key","append","image","imageUrl","response","updateProduct","_id","createProduct","success","message","productData","_error$response","_error$response$data","getDeliveryTemplate","template","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","alt","url","multiple","accept","onChange","placeholder","step","valueAsNumber","rows","onKeyPress","preventDefault","disabled","_c","$RefreshReg$"],"sources":["/Users/937bb/Documents/userProject/AutoPickup/admin-panel/src/components/ProductModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport toast from 'react-hot-toast';\nimport { PhotoIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { productAPI } from '../services/api';\nimport { Product, ProductFormData } from '../types';\n\nconst schema = yup.object({\n  name: yup.string().required('请输入商品名称'),\n  description: yup.string().required('请输入商品描述'),\n  category: yup.string().required('请选择商品分类'),\n  price: yup.number().positive('价格必须大于0').required('请输入价格'),\n  stock: yup.number().integer('库存必须是整数').min(0, '库存不能小于0').required('请输入库存'),\n  deliveryType: yup.string().oneOf(['link', 'text', 'file', 'account']).required('请选择发货类型'),\n  deliveryTemplate: yup.string().required('请输入发货模板'),\n  tags: yup.array().of(yup.string()),\n});\n\ntype FormData = yup.InferType<typeof schema>;\n\ninterface ProductModalProps {\n  product?: Product | null;\n  onClose: () => void;\n  onSave: () => void;\n}\n\nconst ProductModal: React.FC<ProductModalProps> = ({ product, onClose, onSave }) => {\n  const [loading, setLoading] = useState(false);\n  const [tags, setTags] = useState<string[]>([]);\n  const [tagInput, setTagInput] = useState('');\n  const [images, setImages] = useState<File[]>([]);\n  const [imagePreviewUrls, setImagePreviewUrls] = useState<string[]>([]);\n  const [existingImages, setExistingImages] = useState<string[]>([]);\n\n  const categories = ['影视资源', '教育资源', '软件工具', '游戏资源', '音乐资源', '其他'];\n  const deliveryTypes = [\n    { value: 'link', label: '网盘链接' },\n    { value: 'text', label: '文本内容' },\n    { value: 'file', label: '文件下载' },\n    { value: 'account', label: '账号密码' },\n  ];\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    watch,\n    setValue,\n  } = useForm<FormData>({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      name: '',\n      description: '',\n      category: '',\n      price: 0,\n      stock: 0,\n      deliveryType: 'link',\n      deliveryTemplate: '',\n      tags: [],\n    },\n  });\n\n  const deliveryType = watch('deliveryType');\n\n  useEffect(() => {\n    if (product) {\n      reset({\n        name: product.name,\n        description: product.description,\n        category: product.category,\n        price: product.price,\n        stock: product.stock,\n        deliveryType: product.deliveryType,\n        deliveryTemplate: product.deliveryTemplate,\n      });\n      setTags(product.tags || []);\n      setExistingImages(product.images || []);\n    } else {\n      reset({\n        name: '',\n        description: '',\n        category: '',\n        price: 0,\n        stock: 0,\n        deliveryType: 'link',\n        deliveryTemplate: '',\n      });\n      setTags([]);\n      setImages([]);\n      setImagePreviewUrls([]);\n      setExistingImages([]);\n    }\n  }, [product, reset]);\n\n  const handleAddTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter(tag => tag !== tagToRemove));\n  };\n\n  // 处理图片上传\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length + images.length + existingImages.length > 5) {\n      toast.error('最多只能上传5张图片');\n      return;\n    }\n\n    const validFiles = files.filter(file => {\n      const isValidType = file.type.startsWith('image/');\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      if (!isValidType) {\n        toast.error(`${file.name} 不是有效的图片文件`);\n      }\n      if (!isValidSize) {\n        toast.error(`${file.name} 文件大小超过5MB`);\n      }\n      return isValidType && isValidSize;\n    });\n\n    setImages(prev => [...prev, ...validFiles]);\n\n    const newPreviewUrls = validFiles.map(file => URL.createObjectURL(file));\n    setImagePreviewUrls(prev => [...prev, ...newPreviewUrls]);\n  };\n\n  const removeNewImage = (index: number) => {\n    const newImages = images.filter((_, i) => i !== index);\n    const newPreviewUrls = imagePreviewUrls.filter((_, i) => i !== index);\n    \n    URL.revokeObjectURL(imagePreviewUrls[index]);\n    \n    setImages(newImages);\n    setImagePreviewUrls(newPreviewUrls);\n  };\n\n  const removeExistingImage = (index: number) => {\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const onSubmit: SubmitHandler<FormData> = async (data) => {\n    setLoading(true);\n    try {\n      // 如果有图片上传，使用FormData\n      if (images.length > 0 || existingImages.length !== (product?.images?.length || 0)) {\n        const formData = new FormData();\n        \n        // 添加表单数据\n        Object.keys(data).forEach(key => {\n          if (key !== 'tags') {\n            formData.append(key, (data as any)[key]);\n          }\n        });\n        \n        // 添加标签\n        tags.forEach(tag => {\n          formData.append('tags', tag);\n        });\n        \n        // 添加新图片\n        images.forEach(image => {\n          formData.append('images', image);\n        });\n        \n        // 添加保留的已存在图片\n        existingImages.forEach(imageUrl => {\n          formData.append('existingImages', imageUrl);\n        });\n\n        let response;\n        if (product) {\n          response = await productAPI.updateProduct(product._id, formData);\n        } else {\n          response = await productAPI.createProduct(formData);\n        }\n\n        if (response.success) {\n          toast.success(product ? '商品更新成功' : '商品创建成功');\n          onSave();\n        } else {\n          toast.error(response.message || '操作失败');\n        }\n      } else {\n        // 没有图片变化，使用普通对象\n        const productData: ProductFormData = { ...data, tags };\n        \n        let response;\n        if (product) {\n          response = await productAPI.updateProduct(product._id, productData);\n        } else {\n          response = await productAPI.createProduct(productData);\n        }\n\n        if (response.success) {\n          toast.success(product ? '商品更新成功' : '商品创建成功');\n          onSave();\n        } else {\n          toast.error(response.message || '操作失败');\n        }\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || '操作失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getDeliveryTemplate = useCallback((type: string) => {\n    switch (type) {\n      case 'link':\n        return '网盘链接: {link}\\n提取码: {password}\\n有效期: {expiry}';\n      case 'text':\n        return '内容: {content}\\n说明: {description}';\n      case 'file':\n        return '文件名: {filename}\\n下载链接: {download_url}';\n      case 'account':\n        return '账号: {username}\\n密码: {password}\\n说明: {note}';\n      default:\n        return '';\n    }\n  }, []);\n\n  useEffect(() => {\n    if (deliveryType) {\n      const template = getDeliveryTemplate(deliveryType);\n      setValue('deliveryTemplate', template);\n    }\n  }, [deliveryType, getDeliveryTemplate, setValue]);\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n      <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white\">\n        <div className=\"mt-3\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-medium text-gray-900\">\n              {product ? '编辑商品' : '添加商品'}\n            </h3>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <XMarkIcon className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n            {/* 商品图片上传 */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                商品图片 (最多5张)\n              </label>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-4\">\n                {existingImages.map((imageUrl, index) => (\n                  <div key={`existing-${index}`} className=\"relative group\">\n                    <img\n                      src={imageUrl}\n                      alt={`商品图片 ${index + 1}`}\n                      className=\"w-full h-24 object-cover rounded-lg border border-gray-300\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => removeExistingImage(index)}\n                      className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ))}\n                \n                {imagePreviewUrls.map((url, index) => (\n                  <div key={`new-${index}`} className=\"relative group\">\n                    <img\n                      src={url}\n                      alt={`新图片 ${index + 1}`}\n                      className=\"w-full h-24 object-cover rounded-lg border border-gray-300\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => removeNewImage(index)}\n                      className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ))}\n                \n                {(images.length + existingImages.length) < 5 && (\n                  <label className=\"flex flex-col items-center justify-center w-full h-24 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\">\n                    <div className=\"flex flex-col items-center justify-center pt-2 pb-2\">\n                      <PhotoIcon className=\"w-6 h-6 text-gray-400 mb-1\" />\n                      <p className=\"text-xs text-gray-500\">点击上传</p>\n                    </div>\n                    <input\n                      type=\"file\"\n                      multiple\n                      accept=\"image/*\"\n                      onChange={handleImageUpload}\n                      className=\"hidden\"\n                    />\n                  </label>\n                )}\n              </div>\n              \n              <p className=\"text-xs text-gray-500\">\n                支持 JPG、PNG、GIF 格式，单个文件不超过 5MB\n              </p>\n            </div>\n\n            {/* 原有的表单字段 */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  商品名称 *\n                </label>\n                <input\n                  type=\"text\"\n                  {...register('name')}\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    errors.name ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"请输入商品名称\"\n                />\n                {errors.name && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.name.message}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  商品分类 *\n                </label>\n                <select\n                  {...register('category')}\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    errors.category ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                >\n                  <option value=\"\">请选择分类</option>\n                  {categories.map(category => (\n                    <option key={category} value={category}>{category}</option>\n                  ))}\n                </select>\n                {errors.category && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.category.message}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  价格 (¥) *\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  {...register('price', { valueAsNumber: true })}\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    errors.price ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"0.00\"\n                />\n                {errors.price && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.price.message}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  库存 *\n                </label>\n                <input\n                  type=\"number\"\n                  {...register('stock', { valueAsNumber: true })}\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    errors.stock ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"0\"\n                />\n                {errors.stock && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.stock.message}</p>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                商品描述 *\n              </label>\n              <textarea\n                {...register('description')}\n                rows={3}\n                className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${\n                  errors.description ? 'border-red-500' : 'border-gray-300'\n                }`}\n                placeholder=\"请输入商品描述\"\n              />\n              {errors.description && (\n                <p className=\"text-red-500 text-sm mt-1\">{errors.description.message}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                发货类型 *\n              </label>\n              <select\n                {...register('deliveryType')}\n                className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                  errors.deliveryType ? 'border-red-500' : 'border-gray-300'\n                }`}\n              >\n                {deliveryTypes.map(type => (\n                  <option key={type.value} value={type.value}>{type.label}</option>\n                ))}\n              </select>\n              {errors.deliveryType && (\n                <p className=\"text-red-500 text-sm mt-1\">{errors.deliveryType.message}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                发货模板 *\n              </label>\n              <textarea\n                {...register('deliveryTemplate')}\n                rows={4}\n                className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none font-mono text-sm ${\n                  errors.deliveryTemplate ? 'border-red-500' : 'border-gray-300'\n                }`}\n                placeholder=\"请输入发货模板，使用 {变量名} 格式\"\n              />\n              {errors.deliveryTemplate && (\n                <p className=\"text-red-500 text-sm mt-1\">{errors.deliveryTemplate.message}</p>\n              )}\n              <p className=\"text-gray-500 text-xs mt-1\">\n                使用大括号包围变量名，如：{'{link}'}, {'{password}'} 等\n              </p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                商品标签\n              </label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {tags.map((tag, index) => (\n                  <span\n                    key={index}\n                    className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\"\n                  >\n                    {tag}\n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveTag(tag)}\n                      className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                    >\n                      ×\n                    </button>\n                  </span>\n                ))}\n              </div>\n              <div className=\"flex\">\n                <input\n                  type=\"text\"\n                  value={tagInput}\n                  onChange={(e) => setTagInput(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"输入标签后按回车或点击添加\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={handleAddTag}\n                  className=\"px-4 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  添加\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                取消\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    {product ? '更新中...' : '创建中...'}\n                  </>\n                ) : (\n                  product ? '更新商品' : '创建商品'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}